jQuery(function(a){function e(c){c.each(function(){var b=parseInt(a(this).closest(".imagify-chart").next(".imagify-chart-value").text()),b=[{value:b,color:"#00B3D3"},{value:100-b,color:"#D8D8D8"}];(new Chart(a(this)[0].getContext("2d"))).Doughnut(b,{segmentStrokeColor:"#FFF",segmentStrokeWidth:1,animateRotate:!0,tooltipEvents:[]})})}var d='<option value="imagify-bulk-upload">'+imagifyUpload.bulkActionsLabels.optimize+"</option>",d=d+('<option value="imagify-bulk-restore">'+imagifyUpload.bulkActionsLabels.restore+
"</option>");a('.bulkactions select[name="action"]').find("option:last-child").before(d);a('.bulkactions select[name="action2"]').find("option:last-child").before(d);a("#doaction").add("#doaction2").on("click",function(c){value=a(this).prev("select").val();value=value.split("-");"imagify"===value[0]&&(c.preventDefault(),action=value[2],ids=a('input[name^="media"]:checked').map(function(){return this.value}).get(),ids.forEach(function(b,c){setTimeout(function(){a("#imagify-"+action+"-"+b).trigger("click")},
300*c)}))});a(document).on("click",".button-imagify-restore, .button-imagify-manual-upload, .button-imagify-manual-override-upload",function(c){c.preventDefault();c=a(this);var b=c.parents(".column-imagify_optimized_file, .compat-field-imagify .field"),d=c.attr("href");b.html('<div class="button"><span class="imagify-spinner"></span>'+c.data("waiting-label")+"</div>");a.get(d.replace("admin-post.php","admin-ajax.php")).done(function(a){b.html(a.data);b.find(".imagify-datas-more-action a").addClass("is-open").find(".the-text").text(b.find(".imagify-datas-more-action a").data("close"));
b.find(".imagify-datas-details").addClass("is-open");e(b.find(".imagify-chart-container").find("canvas"))})});a(".imagify-datas-details").hide();a(".column-imagify_optimized_file, .compat-field-imagify .field").on("click",".imagify-datas-more-action a",function(){a(this).hasClass("is-open")?(a(a(this).attr("href")).slideUp("300").removeClass("is-open"),a(this).removeClass("is-open").find(".the-text").text(a(this).data("open"))):(a(a(this).attr("href")).slideDown("300").addClass("is-open"),a(this).addClass("is-open").find(".the-text").text(a(this).data("close")));
return!1});e(a(".imagify-chart-container").find("canvas"))});